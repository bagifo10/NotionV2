import{_ as C}from"./index-BMA6W2WV.js";import{getEvents as D,addEvent as w}from"./data-B_Xy0lOC.js";function R(){const b=document.createElement("div");b.className="flex-col w-full h-full gap-md";let s=new Date,v="month";const u=()=>{b.innerHTML="";const y=s.getFullYear(),l=s.getMonth(),c=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],x=document.createElement("div");x.className="flex items-center justify-between";const a=document.createElement("div");a.className="flex items-center gap-md";const g=document.createElement("h2");g.innerText=`${c[l]} ${y}`,g.style.fontWeight="600";const m=document.createElement("div");m.className="flex gap-sm";const t=document.createElement("button");t.innerText="‹",t.style.fontSize="1.2rem",t.className="hover-bg w-8 h-8 rounded flex items-center justify-center",t.onclick=()=>{v==="month"?s.setMonth(s.getMonth()-1):s.setDate(s.getDate()-7),u()};const o=document.createElement("button");o.innerText="›",o.style.fontSize="1.2rem",o.className="hover-bg w-8 h-8 rounded flex items-center justify-center",o.onclick=()=>{v==="month"?s.setMonth(s.getMonth()+1):s.setDate(s.getDate()+7),u()},m.appendChild(t),m.appendChild(o),a.appendChild(g),a.appendChild(m);const d=document.createElement("div");d.className="flex items-center gap-sm bg-card p-1 rounded",d.style.backgroundColor="var(--bg-card)",d.style.padding="4px",d.style.borderRadius="var(--radius-md)",["Mes","Semana"].forEach((n,h)=>{const p=document.createElement("button");p.innerText=n,p.style.padding="6px 12px",p.style.borderRadius="var(--radius-sm)",p.style.fontSize="0.9rem",n==="Mes"&&v==="month"||n==="Semana"&&v==="week"?(p.style.backgroundColor="var(--bg-active)",p.style.color="var(--text-main)"):p.style.color="var(--text-muted)",p.onclick=()=>{v=n==="Mes"?"month":"week",u()},d.appendChild(p)}),x.appendChild(a),x.appendChild(d);const e=document.createElement("div");e.className="calendar-grid",e.style.display="grid",e.style.gap="1px",e.style.backgroundColor="var(--border-light)",e.style.border="1px solid var(--border-light)",e.style.borderRadius="var(--radius-md)",e.style.overflow="auto",e.style.flex="1",v==="month"?(e.style.gridTemplateColumns="repeat(7, 1fr)",e.style.gridAutoRows="minmax(80px, 1fr)",M(e,y,l)):(e.style.gridTemplateColumns="repeat(7, 1fr)",e.style.gridAutoRows="minmax(300px, 1fr)",k(e,s)),b.appendChild(x),b.appendChild(e)},M=(y,l,c)=>{["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"].forEach(t=>{const o=document.createElement("div");o.innerText=t,o.className="flex justify-center items-center text-muted text-xs",o.style.backgroundColor="var(--bg-app)",o.style.padding="4px",o.style.fontWeight="500",o.style.height="30px",y.appendChild(o)});const a=new Date(l,c,1).getDay(),g=new Date(l,c+1,0).getDate(),m=D();for(let t=0;t<a;t++){const o=document.createElement("div");o.style.backgroundColor="var(--bg-card)",y.appendChild(o)}for(let t=1;t<=g;t++){const d=new Date(l,c,t).toISOString().split("T")[0],e=document.createElement("div");e.style.backgroundColor="var(--bg-card)",e.style.padding="6px",e.className="hover-bg flex-col gap-xs",e.style.cursor="pointer";const n=document.createElement("span");n.className="text-xs text-muted",n.innerText=t;const h=new Date;t===h.getDate()&&c===h.getMonth()&&l===h.getFullYear()&&(n.style.backgroundColor="var(--accent-primary)",n.style.color="var(--bg-app)",n.style.width="20px",n.style.height="20px",n.style.borderRadius="50%",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center"),e.appendChild(n),m.filter(r=>r.date===d).forEach(r=>{const i=document.createElement("div");i.className="text-xs truncate hover-bg",i.innerText=r.title,i.style.padding="2px 4px",i.style.backgroundColor=`${r.color}44`,i.style.color=r.color,i.style.borderRadius="2px",i.style.marginTop="2px",i.style.cursor="pointer",i.onclick=N=>{N.stopPropagation();const E=prompt(`Editar evento "${r.title}":
1. Cambiar nombre
2. Borrar
(Escribe 1 o 2)`,"1");if(E==="1"){const f=prompt("Nuevo nombre:",r.title);f&&(C(()=>import("./data-B_Xy0lOC.js"),[]).then(T=>T.updateEvent(r.id,{title:f})),u())}else E==="2"&&confirm(`¿Borrar "${r.title}"?`)&&(C(()=>import("./data-B_Xy0lOC.js"),[]).then(f=>f.deleteEvent(r.id)),u())},e.appendChild(i)}),e.onclick=()=>{const r=prompt(`Nuevo evento para ${d}:`);r&&(w({title:r,date:d,color:"var(--text-main)"}),u())},y.appendChild(e)}},k=(y,l)=>{const c=new Date(l);c.setDate(l.getDate()-l.getDay());const x=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"];for(let a=0;a<7;a++){const g=new Date(c);g.setDate(c.getDate()+a);const m=g.toISOString().split("T")[0],t=document.createElement("div");t.className="flex-col hover-bg",t.style.backgroundColor="var(--bg-card)",t.style.padding="8px",t.style.borderLeft=a>0?"1px solid var(--border-light)":"none",t.style.cursor="pointer";const o=document.createElement("div");o.className="text-center border-b pb-2 mb-2",o.style.borderBottom="1px solid var(--border-light)",o.innerHTML=`
                <div class="text-xs text-muted uppercase">${x[a]}</div>
                <div class="text-lg font-bold">${g.getDate()}</div>
            `,t.appendChild(o),D().filter(e=>e.date===m).forEach(e=>{const n=document.createElement("div");n.innerText=e.title,n.style.padding="4px 8px",n.style.backgroundColor=`${e.color}44`,n.style.color=e.color,n.style.borderRadius="4px",n.style.marginBottom="4px",n.style.fontSize="0.85rem",t.appendChild(n)}),t.onclick=()=>{const e=prompt(`Nuevo evento para ${m}:`);e&&(w({title:e,date:m,color:"var(--text-main)"}),u())},y.appendChild(t)}};return u(),window.addEventListener("data-change-events",u),b}export{R as Calendar};
